CREATE DATABASE alagym_database;

use alagym_database;

CREATE TABLE Food(
    food_id INTEGER AUTO_INCREMENT,
    name VARCHAR(40) NOT NULL,
    quantity FLOAT NOT NULL,
    calories FLOAT NOT NULL,
    protein FLOAT NOT NULL,
    carb FLOAT NOT NULL,
    fat FLOAT DEFAULT 0.0,
    sugar FLOAT DEFAULT 0.0,
    fiber FLOAT DEFAULT 0.0,
    vitB12 FLOAT DEFAULT 0.0,
    vitD FLOAT DEFAULT 0.0,    
    vitA FLOAT DEFAULT 0.0,
    vitC FLOAT DEFAULT 0.0,
    vitE FLOAT DEFAULT 0.0,
    calcium FLOAT DEFAULT 0.0,
    iodine FLOAT DEFAULT 0.0,
    iron FLOAT DEFAULT 0.0,
    zinc FLOAT DEFAULT 0.0,
    PRIMARY KEY (food_id)
    
);

CREATE TABLE Profile(
    profile_id INTEGER AUTO_INCREMENT,
    name VARCHAR(40) NOT NULL,
    age INTEGER NOT NULL,
    biological_genre CHAR NOT NULL,
    weight FLOAT NOT NULL,
    height FLOAT NOT NULL,
    profile_img_path VARCHAR(500) NOT NULL,
    gym_goal VARCHAR(15) NOT NULL,
    calories FLOAT NOT NULL,
    protein FLOAT NOT NULL,
    carb FLOAT NOT NULL,
    fat FLOAT DEFAULT 0.0,
    sugar FLOAT DEFAULT 0.0,
    fiber FLOAT DEFAULT 0.0,
    vitB12 FLOAT DEFAULT 0.0,
    vitD FLOAT DEFAULT 0.0,    
    vitA FLOAT DEFAULT 0.0,
    vitC FLOAT DEFAULT 0.0,
    vitE FLOAT DEFAULT 0.0,
    calcium FLOAT DEFAULT 0.0,
    iodine FLOAT DEFAULT 0.0,
    iron FLOAT DEFAULT 0.0,
    zinc FLOAT DEFAULT 0.0,
    PRIMARY KEY (profile_id)
);

CREATE TABLE MealRecord(
    meal_record_id INTEGER AUTO_INCREMENT,
    profile_id INTEGER,
    date DATE,
    PRIMARY KEY (meal_record_id),
    FOREIGN KEY (profile_id) REFERENCES Profile(profile_id) ON DELETE CASCADE
);

CREATE TABLE Meal(
    meal_id INTEGER AUTO_INCREMENT,
    meal_record_id INTEGER, 
    meal_type VARCHAR(9) NOT NULL,
    PRIMARY KEY(meal_id),
    FOREIGN KEY (meal_record_id) REFERENCES MealRecord(meal_record_id) ON DELETE CASCADE    
);

CREATE TABLE MealFood(
    meal_food_id INTEGER AUTO_INCREMENT,
    meal_id INTEGER,
    food_id INTEGER,
    quantity FLOAT NOT NULL,
    PRIMARY KEY (meal_food_id),
    FOREIGN KEY (meal_id) REFERENCES Meal(meal_id) ON DELETE CASCADE,
    FOREIGN KEY (food_id) REFERENCES Food(food_id) ON DELETE CASCADE
);
